# 関数電卓

Java（Swing）を使って構築した  
デスクトップ向けの関数電卓アプリです。

四則演算に加えて、平方・立方・対数・階乗・指数・根号など  
日常利用から学習用途まで幅広く対応できるようにしています。

内部の計算処理は、式を解析して **逆ポーランド記法（RPN）に変換して評価する方式** を採用しており、  
複雑な関数や多段の演算でも安定して高速に計算できるよう設計されています。

---

# 主な機能
- 四則演算
- 小数計算
- 符号反転
- π / e 定数入力
- 平方・立方などの関数
- 対数・指数・根号
- 2nd による関数切り替え
- RPN（逆ポーランド記法）による安定した計算処理

---

# 機能紹介

## 表示部（結果・入力式・補助表示）

<a href="https://gyazo.com/60eea4b1f6f769b4cf40e641a4b6934a"><img src="https://i.gyazo.com/60eea4b1f6f769b4cf40e641a4b6934a.gif" width="400"></a>

計算結果・入力中の式・前回計算した式を3段構成で表示します。
文字数を制限することによって、画面からはみ出さないようになっています。

---

## 数字入力・四則演算

<a href="https://gyazo.com/91eac721db747eb768eda07500583dbe"><img src="https://i.gyazo.com/91eac721db747eb768eda07500583dbe.gif" width="400"></a>

0〜9 の数字入力、+ - × ÷ の四則演算が可能です。
演算子が連続入力された場合は、最後の1つだけを残すよう自動調整されます。

---

## 小数点入力

<a href="https://gyazo.com/c323c67494988f6bac8dd6b82580868c"><img src="https://i.gyazo.com/c323c67494988f6bac8dd6b82580868c.gif" width="400"></a>

. を押すことで小数を含む計算を行えます。

---

## バックスペース（⌫）

<a href="https://gyazo.com/2653e454f9222182de00ca12ac476c52"><img src="https://i.gyazo.com/2653e454f9222182de00ca12ac476c52.gif" width="400"></a>

入力式の最後の1文字だけを削除します。

---

## クリア機能（C）

<a href="https://gyazo.com/3caf876932df3b68012d4f921d088e4e"><img src="https://i.gyazo.com/3caf876932df3b68012d4f921d088e4e.gif" width="400"></a>

入力式・補助表示・計算結果をすべてリセットします。
フォントサイズも初期状態に戻ります。

---

## 括弧を使った計算（優先順位の制御）

<a href="https://gyazo.com/de8493e8d4918614e73d0636c6bdfab1"><img src="https://i.gyazo.com/de8493e8d4918614e73d0636c6bdfab1.gif" width="400"></a>

括弧 ( ) を使用することで、演算の優先順位を自由に制御できます。
内部では入力された式をトークン分割し、RPN（逆ポーランド記法）に変換することで
数学的な優先順位を正しく保ったまま処理 できるようになっています。

---

## 演算子の優先順位

<a href="https://gyazo.com/d81a5c1c675cb07af47daed7b4ad1e07"><img src="https://i.gyazo.com/d81a5c1c675cb07af47daed7b4ad1e07.gif" width="400"></a>

本アプリは RPN（逆ポーランド記法）を使っており、  
以下の優先順位で式を正しく評価します。

- **関数（平方・立方・対数・指数・階乗・絶対値など）が最優先**
- **次に 累乗・根号（pow / root）**
- **次に × ÷ mod**
- **最後に + −**
- **括弧 ( ) は最優先で処理**

例：`2 + 3 × 4` → `14`、`2 × (3 + 4)` → `14`

---

## 符号反転（+/-）

<a href="https://gyazo.com/c8f742738f01bd39d842d2d047a27420"><img src="https://i.gyazo.com/c8f742738f01bd39d842d2d047a27420.gif" width="400"></a>

式の末尾にある数値だけを プラス ⇄ マイナス に切り替えます。

---

## 定数入力（π / e）

<a href="https://gyazo.com/fb5b49a54fee583876490d847de63e00"><img src="https://i.gyazo.com/fb5b49a54fee583876490d847de63e00.gif" width="400"></a>

π（3.14159...）、e（2.718...）をワンタップで入力できます。
数字の直後に入力した場合は、×π / ×e と自動で掛け算を補完します。

---

## 関数（通常モード）

<a href="https://gyazo.com/692243e32d25b33fe27912de18f176ea"><img src="https://i.gyazo.com/692243e32d25b33fe27912de18f176ea.gif" width="400"></a>

以下の関数を使用できます。

| ボタン | 内容 |
|--------|------|
| x²     | 平方 |
| ¹/x    | 逆数（1 ÷ x） |
| \|x\|  | 絶対値 |
| exp    | e を底とした指数関数 |
| mod    | 剰余演算 |
| ²√x    | 平方根（√x） |
| log    | 常用対数（log₁₀） |
| ln     | 自然対数（logₑ） |
| n!     | 階乗 |
| 10ˣ    | 10 のべき乗 |
| xʸ     | 任意のべき乗 |


---

## 2nd 機能（関数切り替え）

<a href="https://gyazo.com/2eba5cf680c16803f1ee5925411be8ac"><img src="https://i.gyazo.com/2eba5cf680c16803f1ee5925411be8ac.gif" width="400"></a>

2nd ボタンを押すと、一部の関数が上級関数に切り替わります。  
もう一度押すと元の通常モードに戻り、通常関数と上級関数を切り替えて使用できます。

| 通常 | 2nd   | 説明 |
|------|-------|------|
| x²   | x³    | 立方 |
| ²√x  | ³√x   | 立方根 |
| xʸ   | y√x   | y乗根（n乗根） |
| 10ˣ  | 2ˣ    | 2 の累乗 |
| log  | logʸx | 任意底の対数 |
| ln   | eˣ    | 自然対数の指数関数 |


---

# 使用技術

| カテゴリ | 技術 |
|---------|------|
| 言語 | Java 21 |
| UI | Swing |
| 計算処理 | 逆ポーランド記法（RPN） |
| 環境 | VSCode |
| 実行形式 | JAR |
| バージョン管理 | GitHub |

---

## 今後の改善予定
- 履歴機能の追加
- GUI のテーマ切り替え
